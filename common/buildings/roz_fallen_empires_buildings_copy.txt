#######################
#######################
#######################
#######################
#######################堕落帝国建筑复刻

building_roz_ancient_palace = {
    base_buildtime = @b2_time
    capital = yes
    can_build = no
    can_demolish = no
    position_priority = 0

    icon = building_palace

    category = government

    potential = {
        exists = owner
        owner = {

        }
    }

    convert_to = {
        building_hive_major_capital
        building_machine_major_capital
        building_major_capital
        building_resort_major_capital
        building_slave_major_capital
        building_ancient_control_center
        building_ancient_palace
        building_major_capital_wilderness
    }

    planet_modifier = {
        planet_housing_add = 1200
        planet_amenities_add = 15000
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = no }
        }
        modifier = {
            job_fe_overseer_add = 200
            job_fe_protector_add = 200
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_sky_cardinal_add = 200
            job_fe_protector_add = 200
        }
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b2_minerals
        }
        upkeep = {
            energy = 10
        }
    }

    upgrades = {
    }
}

building_roz_affluence_center = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_affluence_center
    building_sets = {
       automation
    }    
    category = manufacturing
    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }
    planet_modifier = {
        planet_amenities_add = 3000
        planet_artisans_produces_mult = 0.20
    }
    inline_script = {
        script = jobs/factory_add
        AMOUNT = @roz_fe_jobs
    }
    resources = {
        category = planet_buildings
        produces = {
            consumer_goods = 500
        }
        upkeep = {
            minerals = 25
            energy = 10
        }
    }

    upgrades = {
    }
}

building_roz_nourishment_center = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_nourishment_center
    building_sets = {
        automation
    }  
    category = resource

    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    planet_modifier = {
        pop_environment_tolerance = 0.10
        planet_farmers_produces_mult = 0.20
    }
    inline_script = {
        script = jobs/farmers_add
        AMOUNT = @roz_fe_jobs
    }

    resources = {
        category = planet_buildings
        produces = {
            food = 750
        }
        upkeep = {
            energy = 20
        }
    }

    upgrades = {
    }
}

building_roz_dimensional_fabricator = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_dimensional_fabricator
    building_sets = {
        automation
    }  
    category = manufacturing

    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    planet_modifier = {
        planet_miners_produces_mult = 0.20
        planet_farmers_exotic_gases_produces_add = 0.05
        planet_miner_volatile_motes_produces_add = 0.05
        planet_technicians_rare_crystals_produces_add = 0.05
    }

    resources = {
        category = planet_buildings
        produces = {
            minerals = 500
            rare_crystals = 30
            exotic_gases = 30
            volatile_motes = 30
            sr_zro = 10
            sr_dark_matter = 10
            sr_living_metal = 10
            nanites = 10
        }
        produces = {
            trigger = {
                exists = owner
            }
            minor_artifacts = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = tech_KZ_VOY_astral_magic
                }
            }
            KZ_VOY_astraldites = 25
            KZ_VOY_cavorites = 20
            KZ_VOY_stellar_core = 10
            KZ_VOY_astral_sakura = 5
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = tech_KZ_VOY_astral_magic
                    has_technology = tech_KZ_VOY_hyperstructure
                }
            }
            KZ_VOY_hyperstructure_alloys = 10
        }
        upkeep = {
            energy = 10
            minerals = 10
        }
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

    upgrades = {
    }
}

building_roz_class_5_singularity = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_bio_reactor_2
    building_sets = {
        automation
    }  
    category = resource

    potential = {
        exists = owner
        # solar_system = {
        #     has_star_flag = graygoo_factory_system
        # }
        # owner = { has_country_flag = roz_lgate_create_flag }

    }
    inline_script = {
        script = jobs/technicians_add
        AMOUNT = @roz_fe_jobs
    }
    planet_modifier = {
        planet_technician_produces_mult = 0.20
    }


    resources = {
        category = planet_buildings
        produces = {
            energy = 1000
        }
    }

    upgrades = {
    }

}

building_roz_nano_forge = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_nano_forge
    category = manufacturing
    building_sets = {
        automation
    }  
    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    destroy_trigger = {
        always = no
    }
    inline_script = {
        script = jobs/foundry_add
        AMOUNT = @roz_fe_jobs
    }
    planet_modifier = {
        planet_structures_upkeep_mult = -0.1
        planet_metallurgists_produces_mult = 0.15
    }

    resources = {
        category = planet_buildings
        produces = {
            alloys = 350
        }
        upkeep = {
            minerals = 20
            energy = 20
            #volatile_motes = 1
            sr_dark_matter = 1
        }
    }

    upgrades = {
    }

}

building_roz_master_archive = {
    base_buildtime = @b2_time
    can_build = no
    can_demolish = yes
    can_be_disabled = no
    can_be_ruined = no
    icon = building_syndicate_outreach_office
    category = research
    building_sets = {
        automation
    }  
    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_politician_add = @roz_fe_jobs
		}
	}
    triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_head_researcher_effect_desc
	}

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_calculator_physicist_add = @roz_fe_jobs
			job_calculator_biologist_add = @roz_fe_jobs
			job_calculator_engineer_add = @roz_fe_jobs
		}
	}
    triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_physicist_add = @roz_fe_jobs
			job_calculator_biologist_add = @roz_fe_jobs
			job_calculator_engineer_add = @roz_fe_jobs
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
        }
        planet_jobs_physics_research_produces_mult = 0.15
        planet_jobs_society_research_produces_mult = 0.15
        planet_jobs_engineering_research_produces_mult = 0.15
    }

    planet_modifier = {
        planet_physicists_physics_research_produces_add = 3
		planet_biologists_society_research_produces_add = 3
		planet_engineers_engineering_research_produces_add = 3
    }

    country_modifier = {
		country_scientist_cap_add = 1
	}

    resources = {
        category = planet_buildings
        produces = {
            physics_research = 350
            society_research = 350
            engineering_research = 350
        }
        upkeep = {
            energy = 30
            exotic_gases = 1
        }
    }

    upgrades = {
    }
}

building_roz_fe_dome = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_dome
    building_sets = {
        automation
    }  
    category = amenity

    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    planet_modifier = {
		planet_housing_add = 8000
		planet_amenities_add = 8000
		planet_pops_upkeep_mult = -0.20
        planet_crime_add = -50
	}

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_domination_imperious_architecture
            }
        }
        modifier = {
            planet_housing_add = 1000
        }
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_machine_servitor
			}
		}
		job_bio_trophy_add = 5000
	}

    resources = {
        category = planet_buildings
        upkeep = {
            energy = 10
        }
    }

}

building_roz_fe_stronghold = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_fortress
    building_sets = {
        automation
    }  
    category = army

    potential = {
        exists = owner
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    destroy_trigger = {
        always = no
    }

    planetary_ftl_inhibitor = yes

    country_modifier = {
		ship_shield_hardening_add = 0.20
        country_naval_cap_mult = 0.15
	}

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			NOT = { has_modifier = slave_colony }
		}
		modifier = {
			job_soldier_add = @roz_fe_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			has_modifier = slave_colony
		}
		modifier = {
			job_battle_thrall_add = @roz_fe_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = @roz_fe_jobs
		}
	}

	planet_modifier = {
		planet_orbital_bombardment_damage = -1.00
	}

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b2_minerals
        }
        upkeep = {
            energy = 20
        }
    }

    triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_soldier_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_warrior_drone_effect_desc
	}
}

building_roz_fe_administration_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_administration_2
    category = unity
    building_sets = {
        automation
    }  
    potential = {
        exists = owner
    }

    destroy_trigger = {
        always = no
    }

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        produces = {
            unity = 150
        }
    }

    planet_modifier = {
        pop_housing_usage_mult = -0.20
        planet_crime_add = -25
        planet_bureaucrats_unity_produces_add = 5
        planet_bureaucrats_trade_produces_add = 2
        planet_jobs_unity_produces_mult = 0.15
        planet_civilians_unity_produces_add = 0.5
        pop_bureaucrat_bonus_workforce_mult = 0.15
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_megacorp = no
				is_worker_coop_empire = no
			}
		}
		modifier = {
			job_bureaucrat_add = @roz_fe_jobs
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_megacorp = no
				is_worker_coop_empire = no
			}
		}
		text = job_bureaucrat_effect_desc
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_megacorp = yes
				is_worker_coop_empire = no
			}
		}
		modifier = {
			job_bureaucrat_add = @roz_fe_jobs
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_megacorp = yes
				is_worker_coop_empire = no
			}
		}
		text = job_manager_effect_desc
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_worker_coop_empire = yes
			}
		}
		modifier = {
			job_bureaucrat_add = @roz_fe_jobs
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_fallen_empire = no
				is_worker_coop_empire = yes
			}
		}
		text = job_steward_effect_desc
	}
}

building_roz_fe_clinic_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_clinic_2
    category = amenity
    building_sets = {
        automation
    }  
    potential = {
        exists = owner
    }

    destroy_trigger = {
        always = no
    }

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        upkeep = {
            #exotic_gases = 2
            alloys = @b2_upkeep
            energy = 15
        }
    }

    # planet_modifier = {
    #     pop_workforce_add = 2000
    # }

    triggered_planet_pop_group_modifier_for_all = {
		potential = {
			always= yes
		}
		bonus_pop_growth = 20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_cloning_tradition = yes
				has_tradition = tr_genetics_efficient_cloning
			}
		}
		fake_pop_growth_mod = 20
	}

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_gene_tailoring
			}
			any_owned_pop_group = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 200
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				game_start_auto_mod_empire = yes
			}
			any_owned_pop_group = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 200
		}
	}
    
    ##
    triggered_planet_modifier = {
		potential = {
			always= yes
		}
		planet_building_build_speed_mult = 0.10
		planet_decision_enact_speed_mult = 0.10
	}

	country_modifier = {
		leader_lifespan_add = 25
	}

	inline_script = {
		script = jobs/spawning_drone_add
		AMOUNT = 300
	}

    planet_modifier = {
        district_automated_workforce = 0.25
    }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		modifier = {
			job_healthcare_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_gene_tailoring
			}
			any_owned_pop_group = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 600
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				game_start_auto_mod_empire = yes
			}
			any_owned_pop_group = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 600
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_country_flag = clone_army_full_potential
				has_active_tradition = tr_cloning_artificial_population_clone_army
			}
		}
		clone_soldiers_sustained = @clones_sustained_low
		mult = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_purity_heightened_attributes_tradition = yes
					has_cloning_artificial_population_tradition = yes
					has_mutation_somatic_subversiveness_tradition = yes
				}
			}
		}
		pop_bonus_workforce_mult = @medical_workforce_mult
		mult = 2
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		text = job_healthcare_effect_desc
	}
}

#星际贸易枢纽
building_roz_fe_market_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_market_2
    category = trade

    building_sets = {
        automation
    }  

    potential = {
        exists = owner
    }

    destroy_trigger = {
        always = no
    }

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        upkeep = {
            #rare_crystals = 2
            alloys = @b2_upkeep
            energy = 15
        }
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

	inline_script = {
		script = "jobs/trader_add"
		AMOUNT = 1500
	}

	country_modifier = {
		country_trade_produces_mult = 0.35
        country_trade_fee = -0.10
	}

	planet_modifier = {
		planet_traders_trade_produces_add = 3
        pop_trader_bonus_workforce_mult = 0.15
	}

	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
			}
		}
		branch_office_value_mult = 0.10
	}
}

building_roz_fe_silo_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_silo_2
    category = resource

    potential = {
        exists = owner
    }

    building_sets = {
		automation
	}

    destroy_trigger = {
        always = no
    }

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        upkeep = {
            alloys = @b2_upkeep
            energy = 15
        }
    }

    planet_modifier = {
        pop_bonus_workforce_mult = 0.05
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

    country_modifier = {
        country_resource_max_add = 750000
        country_resource_max_minor_artifacts_add = 7500
    }
}

building_roz_fe_entertainment_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_entertainment_2
    category = amenity

    potential = {
        exists = owner
    }

    building_sets = {
		automation
	}

    destroy_trigger = {
        always = no
    }

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        upkeep = {
            #rare_crystals = 2
            alloys = @b2_upkeep
            energy = 15
        }
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

    planet_modifier = {
		job_entertainer_add = 1500
		planet_amenities_add = 12500
        pop_bonus_workforce_mult = 0.20
        planet_entertainers_upkeep_mult = -0.20
	}

    triggered_desc = {
        text = job_entertainer_effect_desc
    }
}

building_roz_fe_lab_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_lab_2
    category = research

    building_sets = {
        automation
	}

    potential = {
        exists = owner
        NOT = {
            has_building = building_roz_fe_lab_2
        }
        solar_system = {
            has_star_flag = graygoo_factory_system
        }
        owner = { has_country_flag = roz_lgate_create_flag }
    }

    destroy_trigger = {
        always = no
    }

    resources = {
		category = planet_buildings
		cost = {
			alloys = @b3_minerals
		}
		upkeep = {
			exotic_gases = 1
			alloys = @b3_alloy_upkeep
			energy = 30
		}
		cost = {
			trigger = {
				owner = { is_wilderness_empire = yes }
			}
			biomass = @b3_biomass
		}
		produces = {
			physics_research = 500
			society_research = 500
			engineering_research = 500
		}
	}

    planet_modifier = {
        planet_biologists_minor_artifacts_produces_add = 0.15
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

	inline_script = {
		script = jobs/researchers_add
		AMOUNT = 500
	}
    inline_script = {
		script = jobs/biologists_add
		AMOUNT = 500
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_physicist_add = 300
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_calculator_physicist_add = 300
		}
	}
}

building_roz_fe_mine_2 = {
    base_buildtime = @b2_time
    can_build = no
    icon = building_fe_mine_2
    category = resource

    potential = {
        exists = owner
    }
    building_sets = {
        automation
    }  
    destroy_trigger = {
        always = no
    }

    inline_script = {
		script = jobs/miners_add
		AMOUNT = @roz_fe_jobs
	}

    resources = {
        category = planet_buildings
        cost = {
            alloys = @b3_minerals
        }
        upkeep = {
            #volatile_motes = 2
            alloys = @b3_upkeep
            energy = 30
        }
        produces = {
            minerals = 1000
        }
    }

    planet_modifier = {
		district_mining_max = @b4_max_districts_add
	}

    inline_script = {
        script = jobs/miners_add
        AMOUNT = @roz_fe_jobs
    }

    triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_wilderness_empire = yes
				has_tradition = tr_purity_finish
			}
		}
		planet_building_build_speed_mult = 0.03
		planet_decision_enact_speed_mult = 0.03
	}

	triggered_planet_modifier = {
		potential = {
			NOT = { is_planet_class = pc_shattered_ring_habitable }
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = {
			job_fe_acolyte_mine_add = @roz_fe_jobs
		}
	}

	triggered_desc = {
		trigger = {
			NOT = { is_planet_class = pc_shattered_ring_habitable }
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}

}












